---
title: .net core连接数据库流程
date: 2023-05-19 21:58:10
tags:
    .Net Core
categories:
    .Net Core
---

## .net core连接数据库流程

1. 装包三个（Design、Tools、Sql Server）3.1版本

2. 包管理工具命令行

   ```c#
   Scaffold-DbContext 'Data Source=.;Initial Catalog=LianXi;Integrated Security=True;' Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -Context UserContext
   ```

   

3. 在appsettings中添加

   ```c#
   "ConnectionStrings": {
       "meheLX": "Data Source=.;database=meheLX;Integrated Security=True;"
     },
   ```

   

4. 在ConfigureServices中连接数据库

      ```c#
       services.AddDbContext<UserContext>(options =>
           {
               options.UseSqlServer(Configuration.GetConnectionString("meheLX"));
           });
      ```

      

5. 操作数据

      ```c#
      1.   UserContext _userContext;
             // 构造函数依赖注入
             public MyController(UserContext context)
             {
                 _userContext = context;
             }
             public IActionResult Index()
             {
                 ViewBag.user = _userContext.User.ToList();
                 return View();
             }
      
      
      ```

      

